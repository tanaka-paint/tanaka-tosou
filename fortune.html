<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>å ã„ã‚²ãƒ¼ãƒ ï½œå¿è€…ãŠã¿ãã˜Ã—3æšå¼•ãÃ—æ–½å·¥å ã„ï½œç”°ä¸­å¡—è£…</title>
  <meta name="description" content="å¿è€…ãŠã¿ãã˜ï¼ˆ1æšï¼‰ãƒ»3æšå¼•ãï¼ˆéå»/ç¾åœ¨/æœªæ¥ï¼‰ãƒ»æ–½å·¥ï¼†è‰²é¸ã³å ã„ã‚’ãƒŸãƒƒã‚¯ã‚¹ã€‚éŠã³ãªãŒã‚‰ã€æ¬¡ã®ä¸€æ‰‹ãŒè¦‹ãˆã‚‹ã€‚" />
  <style>
    :root{
      --ink:#0f172a; --mut:#475569; --line:#e2e8f0;
      --night:#0f172a; --smoke:#1e293b;
      --r:18px;
      --shadowA:0 18px 40px rgba(15,23,42,.10);
      --shadowB:0 14px 26px rgba(15,23,42,.08), 0 2px 0 rgba(0,0,0,.06), inset 0 1px 0 rgba(255,255,255,.55);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,"Hiragino Kaku Gothic ProN","Noto Sans JP",Segoe UI,Roboto,Arial,sans-serif;
      color:var(--ink); line-height:1.75;
      background:
        radial-gradient(900px 600px at 10% 0%, rgba(37,99,235,.12), transparent 60%),
        radial-gradient(900px 600px at 90% 10%, rgba(249,115,22,.12), transparent 60%),
        radial-gradient(900px 600px at 50% 100%, rgba(22,163,74,.10), transparent 55%),
        repeating-linear-gradient(135deg, rgba(2,6,23,.045) 0 10px, rgba(2,6,23,0) 10px 22px),
        #fff;
    }
    a{color:inherit; text-decoration:underline; text-underline-offset:3px;}
    .wrap{max-width:980px;margin:0 auto;padding:22px 18px 104px}
    .top{
      display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;
      padding:10px 0 6px;
    }
    .brand{display:flex;align-items:center;gap:10px;font-weight:1000}
    .dot{
      width:14px;height:14px;border-radius:999px;
      background: conic-gradient(from 0deg, #ef4444, #f97316, #eab308, #22c55e, #06b6d4, #3b82f6, #a855f7, #ef4444);
      box-shadow:0 10px 22px rgba(0,0,0,.12);
      border:1px solid rgba(0,0,0,.06);
    }
    .card{
      border:1px solid var(--line);
      border-radius:var(--r);
      background:rgba(255,255,255,.92);
      box-shadow:var(--shadowB);
      padding:16px;
      position:relative;
      overflow:hidden;
    }
    .card:after{
      content:"";
      position:absolute;right:-40px;top:-40px;
      width:220px;height:220px;border-radius:999px;
      background:radial-gradient(circle at 30% 30%, rgba(2,6,23,.14), rgba(2,6,23,0) 62%);
      pointer-events:none;
      transform:rotate(18deg);
    }
    h1{
      margin:10px 0 8px;
      font-size:28px;line-height:1.2;
      background:linear-gradient(135deg, var(--night), var(--smoke));
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;
    }
    .mut{color:var(--mut)}
    .btns{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}
    .btn{
      display:inline-flex;align-items:center;gap:10px;
      padding:12px 14px;border-radius:14px;text-decoration:none;font-weight:1000;
      border:1px solid var(--line);background:#fff;
      box-shadow:0 10px 22px rgba(15,23,42,.06);
      cursor:pointer;
      transition: transform .06s ease;
    }
    .btn:hover{transform:translateY(-1px)}
    .btn:active{transform:translateY(0)}
    .btn.primary{background:linear-gradient(135deg,#2563eb,#60a5fa);border:none;color:#fff}
    .btn.dark{background:linear-gradient(135deg, var(--night), var(--smoke));border:none;color:#fff}
    .btn.ok{background:linear-gradient(135deg,#22c55e,#86efac);border:none}
    .tabs{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
    .tab{
      border:1px solid var(--line);
      background:rgba(255,255,255,.85);
      padding:9px 12px;border-radius:999px;
      font-weight:1000;color:var(--mut);
      cursor:pointer;
      user-select:none;
    }
    .tab[aria-selected="true"]{
      background:linear-gradient(135deg, rgba(2,6,23,.92), rgba(30,41,59,.92));
      color:#fff;border:none;
    }
    .panel{display:none;margin-top:14px}
    .panel.show{display:block}

    .result{
      margin-top:14px;
      padding:14px;border-radius:14px;
      border:1px dashed rgba(2,6,23,.18);
      background:rgba(2,6,23,.03);
      white-space:pre-wrap;
      position:relative;
      overflow:hidden;
    }

    /* çµæœæ¼”å‡ºï¼šã‚·ãƒ¥ãƒƒâ€¦ */
    .result.fx::after{
      content:"";
      position:absolute; inset:-20px;
      background: linear-gradient(120deg, transparent 0%, rgba(255,255,255,.85) 30%, transparent 55%);
      transform: translateX(-120%) rotate(6deg);
      animation: slash 520ms ease-out forwards;
      pointer-events:none;
    }
    @keyframes slash{
      to{ transform: translateX(140%) rotate(6deg); opacity:0; }
    }

    .tags{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .tag{
      display:inline-flex;align-items:center;
      padding:6px 10px;border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.85);
      font-weight:900;font-size:12px;color:var(--mut);
    }
    .grid2{display:grid;gap:12px}
    @media(min-width:860px){ .grid2{grid-template-columns:1fr 1fr} }
    .field{display:grid;gap:6px;margin-top:10px}
    select{
      width:100%;
      padding:10px 12px;
      border:1px solid var(--line);
      border-radius:12px;
      background:#fff;
      font:inherit;
    }
    .note{
      font-size:13px;color:var(--mut);
      border-left:4px solid rgba(2,6,23,.18);
      padding-left:10px;margin:12px 0 0;
    }

    /* 3æšå¼•ãã‚«ãƒ¼ãƒ‰è¦‹ã› */
    .cardsRow{
      display:grid; gap:10px; margin-top:12px;
    }
    @media(min-width:860px){ .cardsRow{grid-template-columns:repeat(3,1fr);} }
    .tarot{
      border:1px solid var(--line);
      border-radius:16px;
      background:rgba(255,255,255,.9);
      box-shadow:0 10px 18px rgba(0,0,0,.06);
      padding:12px;
      min-height:120px;
      position:relative;
      overflow:hidden;
    }
    .tarot .pos{font-weight:1000;color:var(--mut);font-size:12px}
    .tarot .name{font-weight:1000;margin-top:6px}
    .tarot .txt{color:var(--mut);margin-top:6px; font-weight:700; font-size:13px; line-height:1.45}
    .tarot.flip{
      transform: rotateY(90deg);
      opacity:0;
      animation: flipIn 520ms ease forwards;
    }
    @keyframes flipIn{
      0%{transform:rotateY(90deg); opacity:0}
      60%{transform:rotateY(-12deg); opacity:1}
      100%{transform:rotateY(0); opacity:1}
    }

    /* ä¸‹éƒ¨å›ºå®šCTA */
    .ctaBar{
      position:fixed;left:0;right:0;bottom:0;
      padding:10px 12px;
      background:rgba(255,255,255,.9);
      backdrop-filter: blur(10px);
      border-top:1px solid var(--line);
      z-index:50;
    }
    .ctaInner{
      max-width:980px;margin:0 auto;
      display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap;
    }
    .ctaText{font-weight:1000}

    @media (prefers-reduced-motion: reduce){
      .btn{transition:none}
      .btn:hover{transform:none}
      .result.fx::after{display:none}
      .tarot.flip{animation:none; transform:none; opacity:1}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div class="brand"><span class="dot"></span>å ã„ã‚²ãƒ¼ãƒ  <span class="mut">ï½œç”°ä¸­å¡—è£…</span></div>
      <a class="btn" href="index.html">â† ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</a>
    </div>

    <div class="card">
      <div class="mut">éŠã³ã ã‘ã©ã€æ¬¡ã®ä¸€æ‰‹ã¯ãƒã‚¸ã§å‡ºã™ã€‚</div>
      <h1>å¿è€…ãŠã¿ãã˜ Ã— 3æšå¼•ã Ã— æ–½å·¥ãƒ»è‰²å ã„</h1>

      <div class="tabs" role="tablist" aria-label="fortune tabs">
        <button class="tab" role="tab" id="t1" aria-controls="p1" aria-selected="true">ğŸ¥· 1æšå¼•ã</button>
        <button class="tab" role="tab" id="t2" aria-controls="p2" aria-selected="false">ğŸƒ 3æšå¼•ã</button>
        <button class="tab" role="tab" id="t3" aria-controls="p3" aria-selected="false">ğŸ›  æ–½å·¥ãƒ»è‰²å ã„</button>
      </div>

      <!-- Panel 1 -->
      <div class="panel show" id="p1" role="tabpanel" aria-labelledby="t1">
        <div class="mut">ä¸€ç™ºã§ä»Šæ—¥ã®é‹å‹¢ã€‚é™ã‹ã«å¼•ã‘ã€‚</div>
        <div class="btns">
          <button class="btn primary" id="draw1">ğŸ¥· å¼•ã</button>
          <a class="btn dark" id="share1" target="_blank" rel="noopener noreferrer">ğŸŸ© LINEã§é€ã‚‹</a>
        </div>
        <div class="result" id="res1">ã¾ã å¼•ã„ã¦ãªã„ã€‚å¼•ã‘ã€‚</div>
        <div class="tags" id="tags1"></div>
      </div>

      <!-- Panel 2 -->
      <div class="panel" id="p2" role="tabpanel" aria-labelledby="t2">
        <div class="mut">éå»ãƒ»ç¾åœ¨ãƒ»æœªæ¥ã€‚èª­ã¾ã›ã‚‹ã‚„ã¤ã€‚</div>
        <div class="btns">
          <button class="btn primary" id="draw2">ğŸƒ 3æšå¼•ã</button>
          <a class="btn dark" id="share2" target="_blank" rel="noopener noreferrer">ğŸŸ© LINEã§é€ã‚‹</a>
        </div>

        <div class="cardsRow" id="cardsRow"></div>

        <div class="result" id="res2">ã¾ã å¼•ã„ã¦ãªã„ã€‚3æšã„ã‘ã€‚</div>
      </div>

      <!-- Panel 3 -->
      <div class="panel" id="p3" role="tabpanel" aria-labelledby="t3">
        <div class="mut">å®¶ã®çŠ¶æ³ã§ã€Œæ¬¡ã®ä¸€æ‰‹ã€ã‚’å‡ºã™ã€‚ç”°ä¸­å¡—è£…å°‚ç”¨ã€‚</div>

        <div class="grid2">
          <div class="card" style="padding:14px">
            <div class="field">
              <label><b>æ°—ã«ãªã‚‹å ´æ‰€</b></label>
              <select id="q_place">
                <option value="wall">å¤–å£ï¼ˆã‚µã‚¤ãƒ‡ã‚£ãƒ³ã‚°/ãƒ¢ãƒ«ã‚¿ãƒ«ï¼‰</option>
                <option value="roof">å±‹æ ¹</option>
                <option value="balcony">ãƒ™ãƒ©ãƒ³ãƒ€ãƒ»é˜²æ°´</option>
                <option value="concrete">æ‰“ã¡ã£ã±ãªã—ï¼ˆè£œä¿®ãƒ»ä¿è­·ï¼‰</option>
                <option value="shop">åº—èˆ—ãƒ»å†…è£…ï¼ˆæ„åŒ ï¼‰</option>
              </select>
            </div>
            <div class="field">
              <label><b>çŠ¶æ…‹</b></label>
              <select id="q_state">
                <option value="light">è»½åº¦ï¼ˆã¾ã ã„ã‘ã‚‹ï¼‰</option>
                <option value="mid" selected>ä¸­ç¨‹åº¦ï¼ˆä¸€èˆ¬çš„ï¼‰</option>
                <option value="heavy">é‡åº¦ï¼ˆå‰²ã‚Œ/å‰¥ãŒã‚Œ/æ¼ã‚Œæ°—å‘³ï¼‰</option>
              </select>
            </div>
            <div class="field">
              <label><b>æ°—åˆ†ï¼ˆè‰²ã®æ–¹å‘ï¼‰</b></label>
              <select id="q_mood">
                <option value="bright">æ˜ã‚‹ãè¯ã‚„ã‹</option>
                <option value="calm" selected>è½ã¡ç€ããƒ»ä¸Šå“</option>
                <option value="dark">é—‡ãƒ»ç· ã‚ã‚‹ï¼ˆå¿è€…ï¼‰</option>
              </select>
            </div>

            <div class="btns">
              <button class="btn primary" id="draw3">ğŸ›  å‡ºã™</button>
              <a class="btn dark" id="share3" target="_blank" rel="noopener noreferrer">ğŸŸ© LINEã§é€ã‚‹</a>
            </div>
          </div>

          <div class="card" style="padding:14px">
            <div class="mut">å‡ºãŸçµæœã¯ã€ã“ã®ã¾ã¾LINEã§é€ã‚‹ã¨è©±ãŒæ—©ã„ã€‚</div>
            <div class="result" id="res3">ã¾ã å ã£ã¦ãªã„ã€‚çŠ¶æ³ã‚’é¸ã‚“ã§å‡ºã›ã€‚</div>
          </div>
        </div>

        <p class="note">
          â€»éŠã³ï¼‹å®Ÿå‹™ã®é–“ã€‚æœ€çµ‚ã¯å†™çœŸã§æ±ºã‚ã‚‹ã€‚<br>
          ã€Œç”ºåã¾ã§ã®ä½æ‰€ï¼‹æ°—ã«ãªã‚‹ç®‡æ‰€ï¼‹å†™çœŸ2ã€œ4æšã€ã“ã‚Œã§æœ€çŸ­ã€‚
        </p>
      </div>

      <p class="note">
        â€»ã“ã‚Œã¯éŠã³ã€‚ã§ã‚‚ â€œè¡Œå‹•ã™ã‚Œã°+1ãŒä¹—ã‚‹â€ ã¯ã‚¬ãƒã€‚<br>
        æ–½å·¥ç›¸è«‡ã¯ <a href="https://line.me/ti/p/yHunueNM1o" target="_blank" rel="noopener noreferrer">LINEå†™çœŸç›¸è«‡</a> ãŒæœ€çŸ­ã§ã™ã€‚
      </p>
    </div>
  </div>

  <!-- ä¸‹å›ºå®šï¼šç›¸è«‡å°ç·š -->
  <div class="ctaBar">
    <div class="ctaInner">
      <div class="ctaText">ğŸŸ© å†™çœŸé€ã‚‹ã®ãŒæœ€çŸ­ãƒ«ãƒ¼ãƒˆã§ã™ï¼ˆç”ºåã¾ã§OKï¼‰</div>
      <div style="display:flex;gap:10px;flex-wrap:wrap">
        <a class="btn ok" href="https://line.me/ti/p/yHunueNM1o" target="_blank" rel="noopener noreferrer">LINEã§å†™çœŸé€ã‚‹</a>
        <a class="btn" href="tel:090-6120-3852">ğŸ“ é›»è©±</a>
      </div>
    </div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);
    const enc = encodeURIComponent;

    // ===== ã¡ã£ã¡ã‚ƒã„SEï¼ˆå¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ä¸è¦ï¼‰=====
    function beep(){
      try{
        const Ctx = window.AudioContext || window.webkitAudioContext;
        if(!Ctx) return;
        const ctx = new Ctx();
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type = "triangle";
        o.frequency.value = 520;
        g.gain.value = 0.08;
        o.connect(g); g.connect(ctx.destination);
        o.start();
        // å¿è€…ã£ã½ãã€Œã‚·ãƒ¥ãƒƒã€ï¼šä¸€ç¬ã§è½ã¨ã™
        g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.12);
        o.stop(ctx.currentTime + 0.13);
        setTimeout(()=>ctx.close?.(), 220);
      }catch(e){}
    }

    // ===== çµæœæ¼”å‡º =====
    function fx(el){
      el.classList.remove("fx");
      void el.offsetWidth; // reflow
      el.classList.add("fx");
      beep();
    }

    // ===== Tabs =====
    const tabs = [
      { t:$("t1"), p:$("p1") },
      { t:$("t2"), p:$("p2") },
      { t:$("t3"), p:$("p3") },
    ];
    function openTab(i){
      tabs.forEach((x,idx)=>{
        const on = idx===i;
        x.t.setAttribute("aria-selected", on ? "true" : "false");
        x.p.classList.toggle("show", on);
      });
      // URLã«ã‚‚åæ˜ ï¼ˆæˆ»ã£ã¦ããŸæ™‚ã«åŒã˜ã‚¿ãƒ–ï¼‰
      const url = new URL(location.href);
      url.searchParams.set("tab", String(i+1));
      history.replaceState(null, "", url.toString());
    }
    tabs.forEach((x, i)=> x.t.addEventListener("click", ()=>openTab(i)));

    // URL ?tab=2 / ?tab=3 å¯¾å¿œ
    const params = new URLSearchParams(location.search);
    const tab = params.get("tab");
    if(tab==="2") openTab(1);
    if(tab==="3") openTab(2);

    // ===== 1æšå¼•ã =====
    const fortunes = [
      { rank:"å¤§å‰", vibe:"å½±ãŒå‘³æ–¹ã™ã‚‹æ—¥ã€‚é™ã‹ã«å‹•ãã»ã©ã€å‹ã¡ãŒç©ã‚€ã€‚", tags:["é€Ÿã„åˆ¤æ–­","é€£çµ¡ãŒå‰","é“å…·ãŒå†´ãˆã‚‹"], plus1:"+1ï¼š15åˆ†ã ã‘ç‰‡ä»˜ã‘ï¼ˆç¾å ´ã§ã‚‚éƒ¨å±‹ã§ã‚‚ï¼‰" },
      { rank:"ä¸­å‰", vibe:"ç„¦ã‚‰ãšã§OKã€‚æ‰‹é †ã‚’å®ˆã‚‹ã»ã©ä»•ä¸ŠãŒã‚ŠãŒè·³ã­ã‚‹ã€‚", tags:["æ®µå–ã‚Šå¼·ã„","ç¢ºèªãŒæ­¦å™¨","ãƒ ãƒ©ãŒæ¶ˆãˆã‚‹"], plus1:"+1ï¼šãƒ¡ãƒ¢3è¡Œï¼ˆã‚„ã‚‹/ã‚„ã‚‰ãªã„/é€£çµ¡ï¼‰" },
      { rank:"å°å‰", vibe:"æ´¾æ‰‹ãªå‹ã¡ã‚ˆã‚Šåœ°å‘³ãªç©ã¿ä¸Šã’ãŒåŠ¹ãã€‚", tags:["ç¶™ç¶šå‹ã¡","æ‰‹ç›´ã—æ¸›","ä¿¡ç”¨ãŒå¢—ãˆã‚‹"], plus1:"+1ï¼šæ–½å·¥ãƒ»ä½œå“å†™çœŸã‚’1æšæ•´ç†" },
      { rank:"å‰", vibe:"æ™®é€šãŒä¸€ç•ªå¼·ã„ã€‚æ™®é€šã«ã‚„ã‚Œã°æ™®é€šã«å‹ã¤ã€‚", tags:["æ·¡ã€…ã¨å¼·ã„","å®‰å…¨ç¬¬ä¸€","ãƒŸã‚¹ãŒæ¸›ã‚‹"], plus1:"+1ï¼šæ°´åˆ†ã¨ä¼‘æ†©ã‚’ã¡ã‚ƒã‚“ã¨å–ã‚‹" },
      { rank:"æœ«å‰", vibe:"é‹ã¯å¾ŒåŠã«æ¥ã‚‹ã€‚åˆå‰ã¯æº–å‚™ã€åˆå¾Œã§å›åã€‚", tags:["åˆå¾Œã«ä¸ŠãŒã‚‹","å¾…ã¡ãŒæ­£è§£","ç©ã¿ä¸Šã’"], plus1:"+1ï¼šåˆå¾Œã«1æœ¬ã ã‘é€£çµ¡ï¼ˆDM/ãƒ¡ãƒ¼ãƒ«ï¼‰" },
      { rank:"å‡¶", vibe:"ä»Šæ—¥ã¯ç„¡ç†ã—ãªã„ã€‚æ”»ã‚ã‚‹ã‚ˆã‚Šå®ˆã‚ŠãŒå‹ã¤ã€‚", tags:["äº‹æ•…å›é¿","ã‚„ã‚Šç›´ã—é˜²æ­¢","ç‚¹æ¤œãŒå‰"], plus1:"+1ï¼šå±ãªã„æ‰€ã‚’1ã¤æ½°ã™ï¼ˆè¶³å…ƒ/é¤Šç”Ÿ/æ®µå·®ï¼‰" },
    ];
    function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

    function render1(f){
      $("res1").textContent =
`ã€${f.rank}ã€‘
${f.vibe}

${f.plus1}

ï¼ˆå¿è€…ãƒ¡ãƒ¢ï¼šé™ã‹ã«ã‚„ã‚‹ã»ã©ã€åŠ¹ãã€‚ï¼‰`;

      const tags = $("tags1");
      tags.innerHTML = "";
      f.tags.forEach(t=>{
        const s = document.createElement("span");
        s.className = "tag";
        s.textContent = "ğŸŒ€ " + t;
        tags.appendChild(s);
      });

      const msg = `å¿è€…ãŠã¿ãã˜çµæœï¼š${f.rank}\n${f.vibe}\n${f.plus1}\n\n${location.href}`;
      $("share1").href = "https://line.me/R/msg/text/?" + enc(msg);
      fx($("res1"));
    }
    $("draw1").addEventListener("click", ()=> render1(pick(fortunes)));

    // ===== 3æšå¼•ã =====
    const cards = [
      { name:"å¢¨ã®åˆƒ", text:"åˆ‡ã‚‹ã¹ãã¯ç›¸æ‰‹ã˜ã‚ƒãªãã€è¿·ã„ã€‚ã‚„ã‚‹äº‹ã‚’æ¸›ã‚‰ã™ã¨å‹ã¤ã€‚" },
      { name:"é›¨ã®é¤Šç”Ÿ", text:"å®ˆã‚‹æº–å‚™ãŒä»•ä¸ŠãŒã‚Šã‚’æ±ºã‚ã‚‹ã€‚ç„¦ã‚‰ãšã€å…ˆã«è¦†ãˆã€‚" },
      { name:"ä¹¾ãå¾…ã¡", text:"å¾…ã¤ã®ã‚‚ä»•äº‹ã€‚ã„ã¾å‹•ãã¨ãƒ ãƒ©ã«ãªã‚‹ã€‚ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’èª­ã‚ã€‚" },
      { name:"ä¸‹åœ°ã®å£°", text:"è¡¨ã˜ã‚ƒãªã„ã€‚ä¸‹ãŒå…¨ã¦ã€‚å°ã•ã„é•å’Œæ„Ÿã‚’å…ˆã«æ½°ã›ã€‚" },
      { name:"å½±ã®å°ç·š", text:"è¦‹ãˆãªã„å‹•ç·šãŒç¾å ´ã‚’æ•‘ã†ã€‚æ®µå–ã‚Šã§åŠåˆ†å‹ã£ã¦ã‚‹ã€‚" },
      { name:"ç„¡æ©Ÿã®ç›¾", text:"é•·æœŸæˆ¦ã¯è€ä¹…ãŒå‹ã¤ã€‚å®‰ã•ã‚ˆã‚Šå›æ•°ã‚’æ¸›ã‚‰ã›ã€‚" },
      { name:"è‰²ã®å‘¼å¸", text:"æ´¾æ‰‹ã•ã‚ˆã‚Šèª¿å’Œã€‚å…‰ã¨å½±ã®ãƒãƒ©ãƒ³ã‚¹ã§å“ãŒå‡ºã‚‹ã€‚" },
      { name:"ä¸€ç­†å…¥é­‚", text:"ä¸€ç‚¹é›†ä¸­ã€‚å…¨éƒ¨ã‚„ã‚‰ãªã„ã€‚ã“ã“ã‚’æ±ºã‚ã‚ã€‚" },
    ];

    function draw3cards(){
      const pool = [...cards];
      const out = [];
      for(let i=0;i<3;i++){
        const idx = Math.floor(Math.random() * pool.length);
        out.push(pool.splice(idx,1)[0]);
      }
      return out;
    }

    function renderTarotCards(cs){
      const row = $("cardsRow");
      row.innerHTML = "";
      const labels = ["éå»","ç¾åœ¨","æœªæ¥"];
      cs.forEach((c,i)=>{
        const d = document.createElement("div");
        d.className = "tarot flip";
        d.style.animationDelay = (i*90) + "ms";
        d.innerHTML = `
          <div class="pos">ã€${labels[i]}ã€‘</div>
          <div class="name">${c.name}</div>
          <div class="txt">${c.text}</div>
        `;
        row.appendChild(d);
      });
    }

    function render2(cs){
      const [past, now, future] = cs;
      const plus1 = "+1ï¼šå†™çœŸã‚’3æšï¼ˆå…¨ä½“/æ°—ã«ãªã‚‹æ‰€/è¿‘æ¥ï¼‰æ’®ã£ã¦ãŠãã€‚";
      $("res2").textContent =
`ã€éå»ã€‘${past.name}
${past.text}

ã€ç¾åœ¨ã€‘${now.name}
${now.text}

ã€æœªæ¥ã€‘${future.name}
${future.text}

${plus1}
ï¼ˆå¿è€…ãƒ¡ãƒ¢ï¼šå…ˆã«æ•´ãˆã¦ã€é™ã‹ã«å‹ã¤ã€‚ï¼‰`;

      renderTarotCards(cs);

      const msg = `3æšå¼•ãçµæœ\néå»ï¼š${past.name} / ${past.text}\nç¾åœ¨ï¼š${now.name} / ${now.text}\næœªæ¥ï¼š${future.name} / ${future.text}\n${plus1}\n\n${location.href}`;
      $("share2").href = "https://line.me/R/msg/text/?" + enc(msg);
      fx($("res2"));
    }

    $("draw2").addEventListener("click", ()=> render2(draw3cards()));

    // ===== æ–½å·¥ãƒ»è‰²å ã„ =====
    const placeMap = {
      wall:"å¤–å£",
      roof:"å±‹æ ¹",
      balcony:"ãƒ™ãƒ©ãƒ³ãƒ€é˜²æ°´",
      concrete:"æ‰“ã¡ã£ã±ãªã—",
      shop:"åº—èˆ—ãƒ»å†…è£…"
    };
    const moodMap = {
      bright:"æ˜ã‚‹ãè¯ã‚„ã‹",
      calm:"è½ã¡ç€ããƒ»ä¸Šå“",
      dark:"é—‡ãƒ»ç· ã‚ã‚‹ï¼ˆå¿è€…ï¼‰"
    };

    function render3(){
      const place = $("q_place").value;
      const state = $("q_state").value;
      const mood  = $("q_mood").value;

      const base = [];
      base.push(`ã€å¯¾è±¡ã€‘${placeMap[place]}`);
      base.push(`ã€çŠ¶æ…‹ã€‘${$("q_state").selectedOptions[0].textContent}`);
      base.push(`ã€æ–¹å‘ã€‘${moodMap[mood]}`);

      let next = "";
      let note = "";
      let color = "";

      if(place==="wall"){
        next = (state==="heavy")
          ? "æ¬¡ã®ä¸€æ‰‹ï¼šã‚¯ãƒ©ãƒƒã‚¯/æµ®ãã‚’å…ˆã«ç›´ã—ã¦ã‹ã‚‰å¡—ã‚‹ã€‚ä¸‹åœ°ãŒä¸»å½¹ã€‚"
          : "æ¬¡ã®ä¸€æ‰‹ï¼šãƒãƒ§ãƒ¼ã‚­ãƒ³ã‚°ç¢ºèªâ†’ä¸‹å¡—ã‚Šã‚’ã‚±ãƒã‚‰ãªã„ã€‚";
        note = "å¤–å£ã¯ã€Œä¸‹åœ°8å‰²ã€ã€‚å†™çœŸã§å‰²ã‚Œãƒ»ç›®åœ°ãƒ»ãƒãƒ§ãƒ¼ã‚­ãƒ³ã‚°ãŒè¦‹ãˆã‚Œã°æœ€çŸ­ã€‚";
      }
      if(place==="roof"){
        next = (state==="heavy")
          ? "æ¬¡ã®ä¸€æ‰‹ï¼šã‚³ã‚±/éŒ†/ç´ åœ°åŠ£åŒ–ãƒã‚§ãƒƒã‚¯â†’ä¸‹å‡¦ç†åšã‚ã§ã„ãã€‚"
          : "æ¬¡ã®ä¸€æ‰‹ï¼šå±‹æ ¹ã¯ç´«å¤–ç·šãŒå¼·ã„ã€‚è€ä¹…å¯„ã›ï¼ˆç„¡æ©Ÿ/ã‚·ãƒªã‚±ãƒ¼ãƒˆï¼‰ãŒç›¸æ€§â—ã€‚";
        note = "å±‹æ ¹ã¯è¦‹ãˆãªã„æ‰€ã»ã©å·®ãŒå‡ºã‚‹ã€‚å…¨ä½“å†™çœŸï¼‹æ£Ÿæ¿é‡‘å‘¨ã‚ŠãŒã‚ã‚‹ã¨å¼·ã„ã€‚";
      }
      if(place==="balcony"){
        next = (state==="heavy")
          ? "æ¬¡ã®ä¸€æ‰‹ï¼šæ¼ã‚Œç–‘ã„ãªã‚‰ãƒˆãƒƒãƒ—ã ã‘ã˜ã‚ƒãªãä¸‹åœ°ã‹ã‚‰ã€‚"
          : "æ¬¡ã®ä¸€æ‰‹ï¼šè¡¨é¢ã®å‰²ã‚Œãƒ»ç«‹ä¸Šã‚Šãƒ»æ’æ°´ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦äºˆé˜²é˜²æ°´ã€‚";
        note = "é˜²æ°´ã¯â€œæ¼ã‚Œã¦ã‹ã‚‰â€ãŒé«˜ã„ã€‚æ€ªã—ã„ãªã‚‰æ—©ã‚ãŒå‹ã¡ã€‚";
      }
      if(place==="concrete"){
        next = (state==="heavy")
          ? "æ¬¡ã®ä¸€æ‰‹ï¼šæ¬ æ/çˆ†è£‚ãƒªã‚¹ã‚¯ç¢ºèªâ†’è£œä¿®â†’ä¿è­·æï¼ˆãƒ©ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç­‰ï¼‰ã§å®ˆã‚‹ã€‚"
          : "æ¬¡ã®ä¸€æ‰‹ï¼šæ±šã‚Œ/ç™½è¯ã‚’æ•´ç†â†’ä¿è­·ã§ç¾è¦³å›å¾©ã€‚";
        note = "æ‰“ã¡ã£ã±ãªã—ã¯ã€Œè£œä¿®ï¼‹ä¿è­·ã€ãŒã‚»ãƒƒãƒˆã€‚å†™çœŸã§åŠ£åŒ–ãŒåˆ¤æ–­ã§ãã‚‹ã€‚";
      }
      if(place==="shop"){
        next = (state==="heavy")
          ? "æ¬¡ã®ä¸€æ‰‹ï¼šç”¨é€”/å‹•ç·š/æ±šã‚Œæ–¹ã‚’èã„ã¦ã‹ã‚‰ã€æ„åŒ ã¨è€ä¹…ã®ä¸¡ç«‹ã‚’è¨­è¨ˆã€‚"
          : "æ¬¡ã®ä¸€æ‰‹ï¼šæ„åŒ ã¯å…‰ã®å…¥ã‚Šæ–¹ã§æ±ºã¾ã‚‹ã€‚å†™çœŸã¨ã‚¤ãƒ¡ãƒ¼ã‚¸å…±æœ‰ãŒæœ€é€Ÿã€‚";
        note = "åº—èˆ—ã¯â€œé›°å›²æ°—â€ãŒå£²ä¸Šã«ç›´çµã€‚ç´ æãƒ»ç…§æ˜ãƒ»è‰²ã§æœ€çŸ­ææ¡ˆã§ãã‚‹ã€‚";
      }

      if(mood==="bright") color = "è‰²ï¼šç™½Ã—ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ1è‰²ï¼ˆç„é–¢/å¸¯ï¼‰ã§â€œè¯ã‚„ã‹ã«è¦‹ã›ã‚‹â€ã€‚";
      if(mood==="calm")   color = "è‰²ï¼šã‚°ãƒ¬ãƒ¼ã‚¸ãƒ¥/çŸ³è‰²/ä½å½©åº¦ã§â€œä¸Šå“ã«é™ã‹â€ã€‚";
      if(mood==="dark")   color = "è‰²ï¼šãƒãƒ£ã‚³ãƒ¼ãƒ«/æ¿ƒç´º/é»’å¯„ã›ã§â€œå½±ãŒç· ã‚ã‚‹â€ã€‚ï¼ˆå¿è€…ï¼‰";

      const plus1 = "+1ï¼šç”ºåã¾ã§ã®ä½æ‰€ï¼‹æ°—ã«ãªã‚‹ç®‡æ‰€ï¼‹å†™çœŸ2ã€œ4æšã‚’ç”¨æ„ã€‚";
      const out =
`${base.join(" / ")}

${next}
${color}

${note}

${plus1}
ï¼ˆå¿è€…ãƒ¡ãƒ¢ï¼šè¿·ã£ãŸã‚‰ã€å†™çœŸã€‚æŠ¼ã™ã®ã¯ãƒ­ãƒ¼ãƒ©ãƒ¼ã ã‘ã€‚ï¼‰`;

      $("res3").textContent = out;

      const msg = `æ–½å·¥ãƒ»è‰²å ã„çµæœ\n${out}\n\nç›¸è«‡ã¯ã“ã¡ã‚‰ï¼šhttps://line.me/ti/p/yHunueNM1o`;
      $("share3").href = "https://line.me/R/msg/text/?" + enc(msg);
      fx($("res3"));
    }

    $("draw3").addEventListener("click", render3);

    // ãŠã¾ã‘ï¼šãƒ­ãƒ¼ãƒ‰ç›´å¾Œã«ã€Œ1æšå¼•ãã€æŠ¼ã—ãŸããªã‚‹ãªã‚‰ï¼ˆå¥½ã¿ã§ONï¼‰
    // render1(pick(fortunes));
  </script>
</body>
</html>
